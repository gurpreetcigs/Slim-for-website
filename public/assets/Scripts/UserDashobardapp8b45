(function(){"use strict";angular.module("finmitraApp",[])})(),function(){"use strict";function n(n,t){this.getResources=function(){return n.get("/en/Calculator/GetResources")};this.getIsRiskLevelAvailable=function(){var i=t.defer();return n.get("/Api/Values/GetIsUserGeneratedRiskLevel").success(function(n){i.resolve(n)}).error(function(n,t){i.reject("Error: request returned status "+t)}),i.promise};this.deleteGoal=function(i,r){var u=t.defer();return n.get("/Api/Values/DeleteGoal?caltype="+i+"&Id="+r+"").success(function(n){u.resolve(n)}).error(function(n,t){u.reject("Error: request returned status "+t)}),u.promise};this.getGoalRisk=function(i,r){var u=t.defer();return n.get("/Api/Values/GetGoalRisk?RiskLevel="+i+"&RiskYears="+r+"").success(function(n){u.resolve(n)}).error(function(n,t){u.reject("Error: request returned status "+t)}),u.promise};this.getGoalSpecificRiskValue=function(i){var r=t.defer();return n.get("/Api/Values/GetGoalSpecificRiskValue?investmentYears="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getEducationCalculatorResult=function(i){var r=t.defer();return n.get("/Api/Values/GetEducationCalculatorResult?emailId="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getEducationCalculatorResultById=function(i){var r=t.defer();return n.get("/Api/Values/GetEducationCalculatorResultById?Id="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getEmergencyFundCalculatorResult=function(i){var r=t.defer();return n.get("/Api/Values/GetEmergencyFundCalculatorResult?emailId="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getEmergencyFundCalculatorResultById=function(i){var r=t.defer();return n.get("/Api/Values/GetEmergencyFundCalculatorResultById?Id="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getWeddingCalculatorResult=function(i){var r=t.defer();return n.get("/Api/Values/GetWeddingCalculatorResult?emailId="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getWeddingCalculatorResultById=function(i){var r=t.defer();return n.get("/Api/Values/GetWeddingCalculatorResultById?Id="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getBigBuyCalculatorResultById=function(i){var r=t.defer();return n.get("/Api/Values/getBigBuyResultById?Id="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getFDRDCalculatorResultById=function(i){var r=t.defer();return n.get("/Api/Values/GetFDRDCalculatorResultById?Id="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getWealthyCalculatorResult=function(i){var r=t.defer();return n.get("/Api/Values/GetWealthyCalculatorResult?emailId="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getWealthyCalculatorResultById=function(i){var r=t.defer();return n.get("/Api/Values/GetWealthyCalculatorResultById?Id="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getRetirementCalculatorResult=function(i){var r=t.defer();return n.get("/Api/Values/GetRetirementCalculatorResult?emailId="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getRetirementCalculatorResultById=function(i){var r=t.defer();return n.get("/Api/Values/getRetirementCalculatorResultById?Id="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getMySavedGoalList=function(i){var r=t.defer();return n.get("/Api/Values/GetMySavedGoalList?email="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getUserEmail=function(){var i=t.defer();return n.get("/api/values/getloggeduseremail").success(function(n){i.resolve(n)}).error(function(n,t){i.reject("Error: request returned status "+t)}),i.promise};this.getRateMasterCalculatorType=function(i){var r=t.defer();return n.get("/Api/Values/GetCalculatorRates?calType="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getRateMasterByStreamName=function(i,r){var u=t.defer();return n.get("/api/values/getdefaultvalues?calType="+i+"&streamName="+r+"").success(function(n){u.resolve(n)}).error(function(n,t){u.reject("Error: request returned status "+t)}),u.promise};this.getLookUpValue=function(i){var r=t.defer();return n.get("/Api/Values/GetMatrixValue?key="+i.replace("&","and")+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getROIRates=function(i){if(i>0){var r=t.defer();return n.get("/Api/Values/GetRiskRateAndValue?investmentYears="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise}};this.geAssetAllocationValues=function(i,r){var u=t.defer();return n.get("/Api/Values/GetAssetAllocation?investmentYears="+i+"&monthlyContribution="+r+"").success(function(n){u.resolve(n)}).error(function(n,t){u.reject("Error: request returned status "+t)}),u.promise};this.getSecurityAllocationValues=function(i,r){if(i>0){var u=t.defer();return n.get("/Api/Values/GetSecurityAllocation?investmentYears="+i+"&monthlyContribution="+r+"").success(function(n){u.resolve(n)}).error(function(n,t){u.reject("Error: request returned status "+t)}),u.promise}};this.getFDRDSecurityAllocationValues=function(i){if(i>0){var r=t.defer();return n.get("/Api/Values/GetFDRDSecurityAllocation?investmentYears="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise}};this.getClientRiskLevel=function(){var i=t.defer();return n.get("/Api/Values/GetClientRiskLevel").success(function(n){i.resolve(n)}).error(function(n,t){i.reject("Error: request returned status "+t)}),i.promise};this.modifyUserRiskLevelValue=function(i){var r=t.defer();return n.get("/Api/Values/ModifyUserRiskLevelValue?value="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getRatioValueszero=function(i,r,u){var f=t.defer();return n.get("/api/values/GetRiskRateAndValuezero?AgeId="+i+"&ratio="+r+"&IndexValue="+u+"").success(function(n){f.resolve(n)}).error(function(n,t){f.reject("Error: request returned status "+t)}),f.promise};this.getRatioValuesone=function(i,r,u){var f=t.defer();return n.get("/api/values/getriskrateandvalueone?AgeIdone="+i+"&ratioone="+r+"&IndexValue="+u+"").success(function(n){f.resolve(n)}).error(function(n,t){f.reject("Error: request returned status "+t)}),f.promise};this.getRatioValuestwo=function(i,r,u){var f=t.defer();return n.get("/api/values/getriskrateandvaluetwo?AgeIdtwo="+i+"&ratiotwo="+r+"&IndexValue="+u+"").success(function(n){f.resolve(n)}).error(function(n,t){f.reject("Error: request returned status "+t)}),f.promise};this.getRatioValuesthree=function(i){var r=t.defer();return n.get("/api/values/getriskrateandvaluethree?score="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getRatioValuesfour=function(i){var r=t.defer();return n.get("/api/values/getriskrateandvaluefour?score="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.saveUserRiskLevel=function(i){var r=t.defer();return n.get("/api/values/saverisklevel?userRiskLevel="+i+"").success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getCustomerBankDetails=function(){var i=t.defer();return n.get("/api/values/GetCustomerBankDetails").success(function(n){i.resolve(n)}).error(function(n,t){i.reject("Error: request returned status "+t)}),i.promise};this.getPendingFundPayList=function(i,r){var u=t.defer();return n.get("/api/values/GetPendingPaymentFundList?goalid="+i+"&calname="+r+"").success(function(n){u.resolve(n)}).error(function(n,t){u.reject("Error: request returned status "+t)}),u.promise};this.getInvestedGoalList=function(){var i=t.defer();return n.get("/api/values/GetMyInvestedGoalList").success(function(n){i.resolve(n)}).error(function(n,t){i.reject("Error: request returned status "+t)}),i.promise};this.getNotifications=function(){var i=t.defer();return n.get("/api/values/GetNotifications").success(function(n){i.resolve(n)}).error(function(n,t){i.reject("Error: request returned status "+t)}),i.promise};this.CheckGoalNameDuplicate=function(i,r,u){var f=t.defer();return n.get("/Api/Values/IsGoalNameAvailable?goalName="+i+"&calculatorName="+r+"&emailId="+u+"").success(function(n){f.resolve(n)}).error(function(n,t){f.reject("Error: request returned status "+t)}),f.promise};this.getInvestedPortfolioList=function(){var i=t.defer();return n.get("/Api/Values/GetMyInvestedPortfolioList").success(function(n){i.resolve(n)}).error(function(n,t){i.reject("Error: request returned status "+t)}),i.promise};this.getCustomerStatus=function(){var i=t.defer();return n.get("/Api/Values/GetCustomerStatus").success(function(n){i.resolve(n)}).error(function(n,t){i.reject("Error: request returned status "+t)}),i.promise};this.getCustomerStatusCal=function(){var i=t.defer();return n.get("/Api/Values/GetCustomerStatusCal").success(function(n){i.resolve(n)}).error(function(n,t){i.reject("Error: request returned status "+t)}),i.promise};this.deletePaymentPendingFunds=function(i,r){var u=t.defer();return n.get("/Api/Values/DeletePaymentPendingFunds?trxnid="+i+"&calname="+r).success(function(n){u.resolve(n)}).error(function(n,t){u.reject("Error: request returned status "+t)}),u.promise};this.getFundListToRedeem=function(i){var r=t.defer();return n.get("/Api/Values/GetFundListToRedeem?type="+i).success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.getTenureRiskMapping=function(){var i=t.defer();return n.get("/Api/Values/GetTenureRiskMapping").success(function(n){i.resolve(n)}).error(function(n,t){i.reject("Error: request returned status "+t)}),i.promise};this.sendUserActionMailAdmin=function(i){var r=t.defer();return n.get("/Api/Values/SendUserActionMailAdmin?Action="+i).success(function(n){r.resolve(n)}).error(function(n,t){r.reject("Error: request returned status "+t)}),r.promise};this.IsMobileNoAvailable=function(){var i=t.defer();return n.get("/Api/Values/IsMobileNoAvailable").success(function(n){i.resolve(n)}).error(function(n,t){i.reject("Error: request returned status "+t)}),i.promise}}angular.module("finmitraApp").service("CommonService",n);n.$inject=["$http","$q"]}(),function(){"use strict";function n(n,t,i){function r(){for(var i=0,t,r=0;r<n.tenureriskmapping.length;r++)t=n.tenureriskmapping[r],t.tenureid==n.myportfolio.tenureid&&(n.myportfolio.risk=="low"&&t.scale=="low"?i=t.defaultvalue:n.myportfolio.risk=="med"&&t.scale=="med"?i=t.defaultvalue:n.myportfolio.risk=="high"&&t.scale=="high"&&(i=t.defaultvalue));return i}function u(n){if(n.target.files[0].size>4e6)return alert("File size is too big, File should be less than 3 MB"),0;var t=new FileReader;t.onload=function(t){$("#"+n.target.offsetParent.offsetParent.id+" img").attr("src",t.target.result);$("#"+n.target.offsetParent.offsetParent.id+" h5").css("visibility","hidden");$("#"+n.target.offsetParent.offsetParent.id+" .imgHolder").css("border-color","lightgray")};try{t.readAsDataURL(n.target.files[0])}catch(n){}}var f=this;n.SelectedCulutureName="en";n.IsGuestUser=!0;n.myGoalList={};n.education={};n.emergencyFund={};n.retirement={};n.wedding={};n.getwealthy={};n.getwealthy.type=1;n.getwealthyGetGoing={};n.fdrd={};n.bigbuy={};n.bigbuy.currentYear=(new Date).getFullYear();n.myportfolio={amount:"",tenure:1,name:"",investtype:"",risk:2,equityper:"",tenureid:2,valid:!0,equityorrisk:"equity",equityorriskval:"",equityorriskinput:!0};n.tenureriskmapping={};n.filMyGoalList=function(){t.getUserEmail().then(function(i){(i!=""||i==undefined)&&(n.IsGuestUser=!1,t.getMySavedGoalList(i).then(function(t){t!=undefined&&(n.myGoalList=t);setTimeout(function(){$("body").addClass("loaded")},3e3)}),t.getCustomerStatus().then(function(t){t!=undefined&&(n.statenotifications=t)}),t.getTenureRiskMapping().then(function(t){t!=undefined&&(n.tenureriskmapping=t)}),t.IsMobileNoAvailable().then(function(n){n||angular.element("#mobilepop").trigger("click")}))})};n.filMyGoalList();n.saveMobileNo=function(){n.ShowLoaderImage=!0;i.post("/Api/Values/SaveMobileNo?mobileNo="+n.mobileNo).success(function(t){console.log("data="+t);t&&(n.ShowLoaderImage=!1,n.saved=!0,angular.element("#mobilepopup").modal("hide"))}).error(function(){n.ShowLoaderImage=!1;n.SuccessFailureMessage="error: please try again"})};n.notificationcount=function(){if(n.notifications!=undefined){if(n.notifications.link!="false"&&n.notifications.link!=undefined)return $(".notification").css("display","block"),Object.keys(n.notifications).length/4;n.notifications.link=="false"&&$(".notification").css("display","none")}};n.DeleteGoal=function(i,r){var u=confirm("Would you like to delete this goal?");u&&t.deleteGoal(i,r).then(function(){n.filMyGoalList()})};n.checkstatus=function(i){n.statenotifications!=undefined&&(n.statenotifications.message!=undefined?(n.statenotifications.link.indexOf("EKYC")!==-1&&t.sendUserActionMailAdmin("EKYC").then(function(){}),angular.element("#statusnotificationanchor").trigger("click")):i==2?n.statenotifications.link=="myportfolioform"?(angular.element("#investnowanchor").trigger("click"),t.sendUserActionMailAdmin("INVEST").then(function(){})):document.location.href=n.statenotifications.link:i==1&&angular.element("#savedgoalsnotificationanchor").trigger("click"))};n.updatetenureid=function(){var t=n.myportfolio.tenure;t>0&&t<=1?n.myportfolio.tenureid=1:t>=2&&t<=3?n.myportfolio.tenureid=2:t>=4&&t<=5?n.myportfolio.tenureid=3:t>5&&(n.myportfolio.tenureid=4);n.updateslider();n.equityorriskinput=n.myportfolio.tenureid==1?!1:!0};n.investtypestatus="SIP";n.toggleinvesttypestatus=function(){n.investtypestatus=n.myportfolio.investtype?"SIP":"Lumpsum"};n.submitmyportfolio=function(){if(n.myportfolio.name.length<=0||n.myportfolio.amount<=0||n.myportfolio.tenure<=0||n.myportfolio.amount%1e3!=0||n.myportfolio.equityper%10!=0)return n.myportfolio.valid=!1,!1;angular.element("#investnow").modal("hide");n.myportfolio.investtype=n.investtypestatus;n.myportfolio.risk==1?n.myportfolio.risk="low":n.myportfolio.risk==2?n.myportfolio.risk="med":n.myportfolio.risk==3&&(n.myportfolio.risk="high");n.myportfolio.tenure==1?(n.myportfolio.equityorrisk="risk",n.myportfolio.equityorriskval=n.myportfolio.risk):n.myportfolio.tenure>1&&n.myportfolio.equityper>0?(n.myportfolio.equityorrisk="equity",n.myportfolio.equityorriskval=n.myportfolio.equityper):(n.myportfolio.equityorrisk="equity",n.myportfolio.equityorriskval=r());var t={obj:n.myportfolio};return i({method:"POST",url:"/api/values/CreateMyPortfolio",params:t}).success(function(n){n?alert("Your entry has been submitted successfully!!! Our Investment Analyst will contact you soon.."):alert("Oops!!! Something Went Wrong, Please contact admin...");document.location.href="/en/user"}).error(function(){})};n.updateslider=function(){for(var t,r,u,i=0;i<n.tenureriskmapping.length;i++)t=n.tenureriskmapping[i],t.tenureid==n.myportfolio.tenureid&&n.myportfolio.equityper>=t.lower&&n.myportfolio.equityper<=t.upper&&(r=t.scale);r=="high"?u=3:r=="med"&&(u=2);r=="low"&&(u=1);angular.element("#slide").val(u);angular.element("#slide").trigger("change")};n.portfolioPaymentStatus="PD";n.togglePortfoliostatus=function(){n.portfolioPaymentStatus=n.portfolioPaymentStatusCHeckbox?"PD":"PI"};n.goalPaymentStatus=1;n.togglegoalstatus=function(){n.goalPaymentStatus=n.goalPaymentStatusCHeckbox?1:0};n.selectFileforUpload=function(t,i){var r=document.getElementById(i+"Upload");r.addEventListener("change",u,!1);n.SelectedFileForUpload=t[0];n.SaveFile(i)};n.SaveFile=function(t){var r=new FormData;r.append("file",n.SelectedFileForUpload);r.append("fname",t);i.post("/EKYC/SaveFiles",r,{withCredentials:!0,headers:{"Content-Type":undefined},transformRequest:angular.identity}).then(function(){})};n.onEducationSubmit=function(t){t==1&&(window.location="/"+n.SelectedCulutureName+"/calculator/education#?i="+n.education.PlanName+"&ii="+n.education.ChildAge+"&iii="+n.education.HigherChildAge+"&iv="+n.education.MonthlyInvestValue+"&v="+n.education.AlreadySavedValue+"&vi="+n.education.HigherEducationCost+"");t==2&&(window.location="/"+n.SelectedCulutureName+"/calculator/education#?i="+n.education.PlanName+"&ii="+n.education.ChildAge+"&iii="+n.education.HigherChildAge+"&iv="+n.education.HigherEducationCost+"&v="+n.education.AlreadySavedValue+"&vi="+n.education.MonthlyInvestValue+"")};n.onEmergencyFundSubmit=function(){window.location="/"+n.SelectedCulutureName+"/calculator/emergencyfund#?i="+n.emergencyfund.PlanName+"&ii="+n.emergencyfund.CurrentMonthlyExpensesIncludingEMI+"&iii="+n.emergencyfund.MonthlyContributionAmount+"&iv="+n.emergencyfund.CurrentSaving+"&v="+n.emergencyfund.PeriodOfEmergencyFund};n.onRetirementSubmit=function(){window.location="/"+n.SelectedCulutureName+"/calculator/retirement#?i="+n.retirement.planName+"&ii="+n.retirement.curAge+"&iii="+n.retirement.retAge+"&iv="+n.retirement.life_expect+"&v="+n.retirement.monthly_expense+"&vi="+n.retirement.monthly_contri+"&vii="+n.retirement.lumpsum+""};n.onWeddingSubmit=function(){window.location="/"+n.SelectedCulutureName+"/calculator/wedding#?i="+n.wedding.planName+"&ii="+n.wedding.years+"&iii="+n.wedding.cost+"&iv="+n.wedding.monthly_contri+"&v="+n.wedding.lumpsum+"&vi="+n.wedding.gold+"&viii="+n.wedding.crrrAge+""};n.onGetwealthySubmit=function(){window.location=n.getwealthy.type==1?"/"+n.SelectedCulutureName+"/calculator/getwealthy#?i="+n.getwealthy.planName+"&ii="+n.getwealthy.type+"&iii="+n.getwealthy.monthly_contri+"&iv="+n.getwealthy.invest_for_years+"&v="+n.getwealthy.years_sip+"&vi=&vii=":"/"+n.SelectedCulutureName+"/calculator/getwealthy#?i="+n.getwealthy.planName+"&ii="+n.getwealthy.type+"&iii=&iv=&v=&vi="+n.getwealthy.corpus+"&vii="+n.getwealthy.years_corpus+""};n.onFdRdSubmit=function(){window.location="/"+n.SelectedCulutureName+"/calculator/fdrd#?i="+n.fdrd.planName+"&ii="+n.fdrd.type+"&iii="+n.fdrd.monthly_contri+"&iv="+n.fdrd.years+""};n.onBigBuySubmit=function(){window.location="/"+n.SelectedCulutureName+"/calculator/bigbuy#?i="+n.bigbuy.GoalName+"&ii="+n.bigbuy.BigBuyType+"&iii="+n.bigbuy.TotalInvestmentYears+"&iv="+n.bigbuy.InvestmentCurrentCost+"&v="+n.bigbuy.MonthlyContribution+"&vi="+n.bigbuy.LumpSumAmount+""};n.onGetwealthyGetGoingSubmit=function(){window.location="/"+n.SelectedCulutureName+"/calculator/getwealthy#?i=Temp&ii=1&iii="+n.getwealthyGetGoing.Invest+"&iv=10&v=0&vi=0&vii=0"};n.IsEducationChildAgeValid=function(){return n.education.HigherChildAge!=undefined&&parseInt(n.education.HigherChildAge)>0&&parseInt(n.education.HigherChildAge)>parseInt(n.education.ChildAge)&&parseInt(n.education.ChildAge)>=1&&parseInt(n.education.HigherChildAge)<=65?!0:!1};n.IsRetirementcurrentAgeValid=function(){return n.retirement.curAge!=undefined&&parseInt(n.retirement.curAge)>=18&&parseInt(n.retirement.curAge)<=65?!0:!1};n.IsRetirementexpectAgeValid=function(){return n.retirement.life_expect!=undefined&&parseInt(n.retirement.life_expect)>parseInt(n.retirement.retAge)&&parseInt(n.retirement.life_expect)<=99?!0:!1};n.IsRetirementAgeValid=function(){return n.retirement.retAge!=undefined&&parseInt(n.retirement.curAge)>=18&&parseInt(n.retirement.retAge)<=65&&parseInt(n.retirement.retAge)>=parseInt(n.retirement.curAge)+2?!0:!1};n.IsEducationstartageValid=function(){return n.education.HigherChildAge!=undefined&&parseInt(n.education.HigherChildAge)>parseInt(n.education.ChildAge)+1&&parseInt(n.education.HigherChildAge)<parseInt(n.education.ChildAge)+61?!0:!1};n.IsFdrdmonthValid=function(){return n.fdrd.month!=undefined&&parseInt(n.fdrd.month)<13?!0:!1};n.IsBigbuymaturityyearValid=function(){return parseInt(n.bigbuy.TotalInvestmentYears)>=2018&&parseInt(n.bigbuy.TotalInvestmentYears)<=2050?!0:!1};n.IsExpectedWeddingEventValid=function(){return parseInt(n.wedding.years)>1&&parseInt(n.wedding.years)<100?!0:!1};n.IsCurrentAgeOfMarriageIsValid=function(){return parseInt(n.wedding.crrrAge)>=2&&parseInt(n.wedding.crrrAge)<=58?!0:!1};n.IsExpectedAgeOfMarriageIsValid=function(){return parseInt(n.wedding.years)>=18&&parseInt(n.wedding.years)<=60&&parseInt(n.wedding.years)>parseInt(n.wedding.crrrAge)?!0:!1}}angular.module("finmitraApp").controller("DashboardController",n);n.$inject=["$scope","CommonService","$http"]}(),function(){"use strict";function n(n,t,i,r){n.Math=window.Math;n.ageid=0;n.RatioList=0;n.RatioListone=0;n.flag=!1;n.getClientRiskLevelValue=function(){i.getClientRiskLevel().then(function(t){n.OriginalRiskLevel=t.OriginalRiskLevel;n.ModifiedRiskLevel=t.ModifiedRiskLevel})};n.getClientRiskLevelValue();n.ageRange=function(n,t,i){var u,r;for(i=i||1,u=[],r=n;r<=t;r+=i)u.push(r);return u};n.AmountRange1=[1,2.5,5,10,15,20,30];n.AmountRange2=[3,6,10,16,23,30,45];n.AmountRange3=[6,12,20,28,36,45,55];n.AmountRange4=[6,12,20,30,50,100,130];n.AmountRange5=[1,2.5,5,7.5,12,18,30];n.RiskProfiles=["Ultra Conservative a.k.a Turtle","Low Risk a.k.a Cow","Safe a.k.a Goat","Balanced a.k.a Elephant","Moderate a.k.a Bear","Growth a.k.a Jaguar","Aggressive a.k.a Tiger"];n.RiskProfilesContent=["A very slow moving animal that that avoids predators, by hiding in its shell to protect itself. As an investor this means that you seek only safe, assured returns.","Typically, an amiable animal, that’s slightly on the heavier and slow-moving side and vulnerable as prey. As an investor, this means that you would barely explore high-growth investments like equity Mutual Funds.","A curious, intelligent, nimble animal and rams can be aggressive at times. As an investor this means that you would explore some high-growth investments like equity Mutual Funds, but in a measured way.","A large, wise animal that can defend itself against almost any animal. As an investor this means that your portfolio is well rounded, and  offers both growth & protection in correct measure.","A moderate sized, solitary predator, adept swimmer, runner & climber, with omnivorous diet and can defend itself. As an investor this means that you seek a small degree of protection and would make risky investment opportunities that you believe would yield good returns.","A stalk & ambush predator, with a powerful bite, a large hunting range, it is an energetic and elusive animal. As an investor this means that you have a hunter’s mentality in searching for returns, will take risks and  your risk taking willingness is supported by your ability to take risk as well.","The largest feline predator, social but solitary, can make large leaps, drag heavy kills over large distances & go hungry for upto two weeks. As an investor this means that you are willing to take substantial risks in return for higher returns and your risk taking appetite and capability is not matched by any other investor."];n.Amount1=[5e4,175e3,375e3,75e4,125e4,175e4,25e5];n.Amount2=[15e4,45e4,8e5,13e5,195e4,265e4,375e4];n.Amount3=[3e5,9e5,16e5,24e5,32e5,405e4,5e6];n.Amount4=[3e5,9e5,16e5,24e5,4e6,75e5,115e5];n.Amount5=[5e4,175e3,375e3,625e3,975e3,15e5,24e5];n.AccRatios1=[.1,.2,.4,.6,.8,1,10];n.AccRatios2=[.5,1,1.5,2,2.5,3,10];n.AccRatios3=[.75,1.5,2.25,3,3.75,4.5,10];n.AccRatios4=[1,2,4,6,7.5,9,12];n.AccRatios5=[6,10,15,20,25,30,50];n.TotalDebtRatios1=[1,2,3,4,5,6,7];n.TotalDebtRatios2=[0,1,2,3,4,5,7];n.AnnualRatios=[.07,.14,.28,.35,.42,.49,1];n.Amount=[];n.AmountRange=[];n.AccRatios=[];n.TotalDebtRatios=[];n.Index=0;n.final_result=0;n.AttitudeRisk={ans1:0,ans2:0,ans3:0,ans4:0,ans5:0,ans6:0,ans7:0,ans8:0,ans9:0,sum:0,scale:0};n.CapacityRisk={ans9:0,ans10:0,ans11:0,ans12:0,ans13:0,ans14:0,sum:0,scale:0};n.AnnualIncome={field1:0,field2:0,field3:0,field4:0,field5:0,field6:0,total:0};n.AnnualHouseholdSavings={field1:0,field2:0,field3:0,field4:0,field5:0,field6:0,field7:0,field8:0,field9:0,field10:0,total:0};n.TotalAssets={field1:0,field2:0,field3:0,field4:0,field5:0,field6:0,field7:0,field8:0,field9:0,field10:0,field11:0,total:0};n.TotalLoans={field1:0,field2:0,field3:0,field4:0,field5:0,field6:0,field7:0,field8:0,total:0};n.MonthlyExpenses={field1:0,field2:0,field3:0,field4:0,field5:0,field6:0,field7:0,field8:0,field9:0,total:0};n.Validate=function(n){return isNaN(n)||n==undefined?0:n};n.MonthlyExpensesTotal=function(){n.MonthlyExpenses.total=parseInt(n.Validate(n.MonthlyExpenses.field1))+parseInt(n.Validate(n.MonthlyExpenses.field2))+parseInt(n.Validate(n.MonthlyExpenses.field3))+parseInt(n.Validate(n.MonthlyExpenses.field4))+parseInt(n.Validate(n.MonthlyExpenses.field5))+parseInt(n.Validate(n.MonthlyExpenses.field6))+parseInt(n.Validate(n.MonthlyExpenses.field7))+parseInt(n.Validate(n.MonthlyExpenses.field8))+parseInt(n.Validate(n.MonthlyExpenses.field9));parseInt(n.MonthlyExpenses.total)};n.AnnualIncomeTotal=function(){for(n.AnnualIncome.total=parseInt(n.Validate(n.AnnualIncome.field1))+parseInt(n.Validate(n.AnnualIncome.field2))+parseInt(n.Validate(n.AnnualIncome.field3))+parseInt(n.Validate(n.AnnualIncome.field4))+parseInt(n.Validate(n.AnnualIncome.field5))+parseInt(n.Validate(n.AnnualIncome.field6)),parseInt(n.AnnualIncome.total),n.flag=!1,n.i=0;n.i<7;n.i++)n.AnnualIncome.total>n.AmountRange[n.i]*1e5&&(n.CapacityRisk.ans11=n.Amount[n.i],n.flag=!0,n.AnnualIncome.total<=n.AmountRange[n.i+1]*1e5&&(n.CapacityRisk.ans11=n.Amount[n.i+1],n.flag=!0)),n.AnnualIncome.total>=n.AmountRange[6]*1e5&&(n.CapacityRisk.ans11=n.Amount[6],n.flag=!0),n.flag||(n.CapacityRisk.ans11=n.Amount[0])};n.AnnualHouseholdSavingsTotal=function(){for(n.AnnualHouseholdSavings.total=parseInt(n.Validate(n.AnnualHouseholdSavings.field1))+parseInt(n.Validate(n.AnnualHouseholdSavings.field2))+parseInt(n.Validate(n.AnnualHouseholdSavings.field3))+parseInt(n.Validate(n.AnnualHouseholdSavings.field4))+parseInt(n.Validate(n.AnnualHouseholdSavings.field5))+parseInt(n.Validate(n.AnnualHouseholdSavings.field6))+parseInt(n.Validate(n.AnnualHouseholdSavings.field7))+parseInt(n.Validate(n.AnnualHouseholdSavings.field8))+parseInt(n.Validate(n.AnnualHouseholdSavings.field9))+parseInt(n.Validate(n.AnnualHouseholdSavings.field10)),parseInt(n.AnnualHouseholdSavings.total),n.flag=!1,n.i=0;n.i<7;n.i++)n.AnnualHouseholdSavings.total>n.CapacityRisk.ans11*n.AccRatios[n.i]&&(n.CapacityRisk.ans12=n.AccRatios[n.i],n.flag=!0,n.AnnualHouseholdSavings.total<=n.CapacityRisk.ans11*n.AccRatios[n.i+1]&&(n.CapacityRisk.ans12=n.AccRatios[n.i+1],n.flag=!0)),n.AnnualHouseholdSavings.total>=n.CapacityRisk.ans11*n.AccRatios[6]&&(n.CapacityRisk.ans12=n.AccRatios[6],n.flag=!0),n.flag||(n.CapacityRisk.ans12=n.AccRatios[0])};n.TotalAssetsFunc=function(){for(n.TotalAssets.total=parseInt(n.Validate(n.TotalAssets.field1))+parseInt(n.Validate(n.TotalAssets.field2))+parseInt(n.Validate(n.TotalAssets.field3))+parseInt(n.Validate(n.TotalAssets.field4))+parseInt(n.Validate(n.TotalAssets.field5))+parseInt(n.Validate(n.TotalAssets.field6))+parseInt(n.Validate(n.TotalAssets.field7))+parseInt(n.Validate(n.TotalAssets.field8))+parseInt(n.Validate(n.TotalAssets.field9))+parseInt(n.Validate(n.TotalAssets.field10))+parseInt(n.Validate(n.TotalAssets.field11)),parseInt(n.TotalAssets.total),n.flag=!1,n.i=0;n.i<7;n.i++)n.TotalAssets.total>n.CapacityRisk.ans11*n.TotalDebtRatios[n.i]&&(n.CapacityRisk.ans13=n.TotalDebtRatios[n.i],n.flag=!0,n.TotalAssets.total<=n.CapacityRisk.ans11*n.TotalDebtRatios[n.i+1]&&(n.CapacityRisk.ans13=n.TotalDebtRatios[n.i+1],n.flag=!0)),n.TotalAssets.total>=n.CapacityRisk.ans11*n.TotalDebtRatios[6]&&(n.CapacityRisk.ans13=n.TotalDebtRatios[6],n.flag=!0),n.flag||(n.CapacityRisk.ans13=n.TotalDebtRatios[0])};n.TotalLoansFunc=function(){for(n.TotalLoans.total=parseInt(n.Validate(n.TotalLoans.field1))+parseInt(n.Validate(n.TotalLoans.field2))+parseInt(n.Validate(n.TotalLoans.field3))+parseInt(n.Validate(n.TotalLoans.field4))+parseInt(n.Validate(n.TotalLoans.field5))+parseInt(n.Validate(n.TotalLoans.field6))+parseInt(n.Validate(n.TotalLoans.field7))+parseInt(n.Validate(n.TotalLoans.field8)),parseInt(n.TotalLoans.total),n.flag=!1,n.i=0;n.i<7;n.i++)n.TotalLoans.total>n.CapacityRisk.ans11*n.AnnualRatios[n.i]&&(n.CapacityRisk.ans14=n.AnnualRatios[n.i],n.flag=!0,n.TotalLoans.total<=n.CapacityRisk.ans11*n.AnnualRatios[n.i+1]&&(n.CapacityRisk.ans14=n.AnnualRatios[n.i+1],n.flag=!0)),n.TotalLoans.total>=n.CapacityRisk.ans11*n.AnnualRatios[6]&&(n.CapacityRisk.ans14=n.AnnualRatios[6],n.flag=!0),n.flag||(n.CapacityRisk.ans14=n.AnnualRatios[0])};n.GenerateOptions=function(n){return n<1e5?Math.round(n/1e3):(n/1e5).toFixed(1)};n.GenerateOptionsUnit=function(n){return n<1e5?"thousand":"lakh"};n.AttitudeUpdate=function(){n.AttitudeRisk.sum=parseInt(n.AttitudeRisk.ans1)+parseInt(n.AttitudeRisk.ans2)+parseInt(n.AttitudeRisk.ans3)+parseInt(n.AttitudeRisk.ans4)+parseInt(n.AttitudeRisk.ans5)};n.AmountRatioFetch=function(){var t=parseInt(n.CapacityRisk.ans9);switch(!0){case t<=30:n.Amount=n.Amount1;n.AmountRange=n.AmountRange1;n.AccRatios=n.AccRatios1;n.TotalDebtRatios=n.TotalDebtRatios1;n.ageid=1;break;case t>30&&t<=35:n.Amount=n.Amount2;n.AmountRange=n.AmountRange2;n.AccRatios=n.AccRatios2;n.TotalDebtRatios=n.TotalDebtRatios1;n.ageid=2;break;case t>35&&t<=45:n.Amount=n.Amount3;n.AmountRange=n.AmountRange3;n.AccRatios=n.AccRatios3;n.TotalDebtRatios=n.TotalDebtRatios1;n.ageid=3;break;case t>45&&t<=50:n.Amount=n.Amount4;n.AmountRange=n.AmountRange4;n.AccRatios=n.AccRatios4;n.TotalDebtRatios=n.TotalDebtRatios1;n.ageid=4;break;case t>50&&t<=55:n.Amount=n.Amount4;n.AmountRange=n.AmountRange4;n.AccRatios=n.AccRatios4;n.TotalDebtRatios=n.TotalDebtRatios1;n.ageid=5;break;case t>55&&t<=60:n.Amount=n.Amount4;n.AmountRange=n.AmountRange4;n.AccRatios=n.AccRatios4;n.TotalDebtRatios=n.TotalDebtRatios1;n.ageid=6;break;case t>60:n.Amount=n.Amount5;n.AmountRange=n.AmountRange5;n.AccRatios=n.AccRatios5;n.TotalDebtRatios=n.TotalDebtRatios2;n.ageid=7}};n.AmountRatioFetch1=function(){n.CapacityRisk.ans10==6&&(n.Amount=n.Amount5,n.AmountRange=n.AmountRange5,n.AccRatios=n.AccRatios5,n.TotalDebtRatios=n.TotalDebtRatios2,n.ageid=7)};n.Total=function(){n.Index=n.Amount.indexOf(parseInt(n.CapacityRisk.ans11,10))+1;n.Index="C"+n.Index;n.CapacityRisk.sum=0;u(n.ageid,n.CapacityRisk.ans12)};n.Final=function(){n.CapacityRisk.scale=n.RatioListthree.Scale*.65;n.AttitudeRisk.scale=n.RatioListfour.Scale*.35;n.final_result=n.CapacityRisk.sum>=n.AttitudeRisk.sum?Math.ceil(n.CapacityRisk.scale+n.AttitudeRisk.scale):Math.floor(n.CapacityRisk.scale+n.AttitudeRisk.scale)};n.Insert=function(){h(n.final_result);location.reload()};var u=function(t,r){var u=n.Index;i.getRatioValueszero(t,r,u).then(function(t){n.RatioList=t;n.CapacityRisk.sum+=parseInt(t);f(n.ageid,n.CapacityRisk.ans13,u)})},f=function(t,r,u){i.getRatioValuesone(t,r,u).then(function(t){n.RatioListone=t;n.CapacityRisk.sum+=parseInt(t);e(n.ageid,n.CapacityRisk.ans14,u)})},e=function(t,r,u){i.getRatioValuestwo(t,r,u).then(function(t){n.RatioListtwo=t;n.CapacityRisk.sum+=parseInt(t);o(n.CapacityRisk.sum)})},o=function(t){i.getRatioValuesthree(t).then(function(t){n.RatioListthree=t;s(n.AttitudeRisk.sum)})},s=function(t){i.getRatioValuesfour(t).then(function(t){n.RatioListfour=t;n.Final()})},h=function(n){i.saveUserRiskLevel(n).then(function(){r.$broadcast("UpdateRiskValueInGaugeMeter",{data:n})})};n.setAgeModel=function(t){n.CapacityRisk.ans9=t};n.ShowRiskGaugeMeter=!1;n.toggleModifyDiv=!1;n.getClientRiskLevelValue=function(){i.getClientRiskLevel().then(function(t){t!=undefined&&t.ModifiedRiskValue>0&&(n.ShowRiskGaugeMeter=!0,n.clientRiskLevelGaugeData={Name:"<h5>Your Personal Risk Profile<\/h5>",Min:0,Max:7,Value:t.ModifiedRiskValue})})};n.getClientRiskLevelValue();n.$on("UpdateRiskValueInGaugeMeter",function(t,i){n.ShowRiskGaugeMeter=!0;n.clientRiskLevelGaugeData=[];n.clientRiskLevelGaugeData={Name:"<h5>Your Personal Risk Profile<\/h5>",Min:0,Max:7,Value:i.data}});n.onModifyRiskLevelChange=function(t){i.modifyUserRiskLevelValue(t).then(function(t){n.final_result=t.ModifiedRiskValue;n.toggleModifyDiv=!1;r.$broadcast("UpdateRiskValueInGaugeMeter",{data:t.ModifiedRiskValue})})}}angular.module("finmitraApp").controller("RiskProfileControllor",n);n.$inject=["$scope","$http","CommonService","$rootScope"]}(),function(){"use strict";function n(n,t,i,r){function u(n){if(n.target.files[0].size>4e6)return alert("File size is too big, File should be less than 3 MB"),0;var t=new FileReader;t.onload=function(t){$("#"+n.target.offsetParent.offsetParent.id+" img").attr("src",t.target.result);$("#"+n.target.offsetParent.offsetParent.id+" h5").css("visibility","hidden");$("#"+n.target.offsetParent.offsetParent.id+" .imgHolder").css("border-color","lightgray")};try{t.readAsDataURL(n.target.files[0])}catch(n){}}var f=this;n.FundListBusy=!0;n.IsGuestUser=!0;n.myGoalList={};n.education={};n.emergencyFund={};n.retirement={};n.wedding={};n.getwealthy={};n.getwealthy.type=1;n.getwealthyGetGoing={};n.fdrd={};n.bigbuy={};n.notifications=[];n.fileUploadTypes=[];n.fileUploadTypesList=[];n.myPortfolioList=[];n.FundListforRedeem=[];n.InvestedFundlist=[];n.redeemCalcName=null;n.redeemGoalName=null;n.redeemportFolioName=null;n.redeemFund=[];n.CurrentDate=new Date;n.totredemptionAmt=0;n.redeemstatus=!1;n.approved=null;n.bigbuy.currentYear=(new Date).getFullYear();n.filMyGoalList=function(){r.getUserEmail().then(function(t){(t!=""||t==undefined)&&(n.IsGuestUser=!1,r.getMySavedGoalList(t).then(function(t){t!=undefined&&(n.myGoalList=t)}),r.getInvestedGoalList().then(function(t){t!=undefined&&(n.myInvestedGoalList=t,console.log("Invested Goal",n.myInvestedGoalList),angular.forEach(n.myPortfolioList,function(t){n.redeemGoalName==t.Type&&n.FundListforRedeemGoals.push(t)}))}),r.getInvestedPortfolioList().then(function(t){t!=undefined&&(n.myPortfolioList=t,console.log(n.myPortfolioList),angular.forEach(n.myPortfolioList,function(t){n.redeemportFolioName==t.Type&&n.FundListforRedeemPortfolio.push(t)}),angular.forEach(n.myPortfolioList,function(t){n.redeemGoalName==t.Type&&n.FundListforRedeemGoals.push(t)}))}),n.FundListforRedeemPortfolio=[],r.getFundListToRedeem("myportfolio").then(function(t){var u,i,r,f;if(t!=undefined){for(n.FundListforRedeemPortfolio=t,u=864e5,i=0;i<Object.keys(n.FundListforRedeemPortfolio).length;i++)n.secondDate=null,r=0,n.secondDate=new Date(n.FundListforRedeemPortfolio[i].PurchasedOn),r=Math.abs((n.CurrentDate.getTime()-n.secondDate.getTime())/u),r/365<3&&n.FundListforRedeemPortfolio[i].IsElss==!0?(n.FundListforRedeemPortfolio[i].redeemable=!1,f=1095,n.FundListforRedeemPortfolio[i].PurchasedOn=n.secondDate.setDate(n.secondDate.getDate()+f)):n.FundListforRedeemPortfolio[i].redeemable=!0;n.FundListBusy=!1;console.log(r)}}),n.FundListforRedeemGoals=[],r.getFundListToRedeem("goal").then(function(t){if(t!=undefined){n.FundListforRedeemGoals=t;console.log(n.FundListforRedeemGoals);for(var i=0;i<Object.keys(n.FundListforRedeemGoals).length;i++);}}),n.bankdetailslist=[],r.getCustomerBankDetails().then(function(t){t!=undefined&&(n.bankdetailslist=t,n.payload=!1)}))})};n.filMyGoalList();n.GoalredemptionAmtValid=function(){angular.forEach(n.FundListforRedeemGoals,function(t){var i;if(t.RedeemAmt==null&&(t.redeemgoals=!1),t.RedeemType=="Unit"&&t.RedeemAmt>t.Units){for($("#goalredeem"+t.TrxnUniqueID).css("border","1px solid Red"),t.redeemgoals=!1,i=0;t.TrxnUniqueID!=n.RedemptionCartList2[i].TrxnUniqueID;i++);n.RedemptionCartList2.splice(i,1)}else if(t.RedeemType=="Amount"&&t.RedeemAmt>t.Amount)for($("#goalredeem"+t.TrxnUniqueID).css("border","1px solid Red"),t.redeemgoals=!1,i=0;n.RedemptionCartList2.length;i++)t.TrxnUniqueID==n.RedemptionCartList2[i].TrxnUniqueID&&n.RedemptionCartList2.splice(i,1);else t.RedeemType=="Unit"&&t.RedeemAmt<=t.Units?$("#goalredeem"+t.TrxnUniqueID).css("border","1px solid Green"):t.RedeemType=="Amount"&&t.RedeemAmt<=t.Amount&&$("#goalredeem"+t.TrxnUniqueID).css("border","1px solid Green")})};n.assignRedemptionType=function(){angular.forEach(n.FundListforRedeemGoals,function(n){n.RedeemType=n.redeemTypeCHeckbox==!0?"Unit":"Amount"})};n.passAllUnitsOrAmtGoal=function(){angular.forEach(n.FundListforRedeemGoals,function(n){n.All==!0?(n.AllUnits="Y",n.RedeemAmt=n.redeemTypeCHeckbox==!0?n.Units:n.Amount):n.AllUnits="N"})};n.PortfolioredemptionAmtValid=function(t){t!=undefined&&(console.log(t.TrxnUniqueID+" redamt= "+t.RedeemAmt+" Amt= "+t.Amount),console.log(n.RedemptionCartList2),angular.forEach(n.FundListforRedeemPortfolio,function(t){var i;if(t.RedeemAmt==null&&(t.redeemportfolio=!1),t.RedeemType=="Unit"&&t.RedeemAmt>t.Units){if($("#portfolioredeem"+t.TrxnUniqueID).css("border","1px solid Red"),t.redeemportfolio=!1,n.RedemptionCartList2.length>0){for(i=0;t.TrxnUniqueID!=n.RedemptionCartList2[i].TrxnUniqueID;i++);n.RedemptionCartList2.splice(i,1)}}else if(t.RedeemType=="Amount"&&t.RedeemAmt>t.Amount){if($("#portfolioredeem"+t.TrxnUniqueID).css("border","1px solid Red"),t.redeemportfolio=!1,n.RedemptionCartList2.length>0)for(i=0;t.TrxnUniqueID!=n.RedemptionCartList2[i].TrxnUniqueID;i++)t.TrxnUniqueID==n.RedemptionCartList2[i].TrxnUniqueID&&n.RedemptionCartList2.splice(i,1)}else $("#portfolioredeem"+t.TrxnUniqueID).css("border","1px solid Green")}))};n.assignRedemptionTypePortfolio=function(){angular.forEach(n.FundListforRedeemPortfolio,function(n){n.RedeemType=n.redeemTypeCHeckbox==!0?"Unit":"Amount"})};n.passAllUnitsOrAmtPortfolio=function(){angular.forEach(n.FundListforRedeemPortfolio,function(n){n.All==!0?(n.AllUnits="Y",n.RedeemAmt=n.redeemTypeCHeckbox==!0?n.Units:n.Amount):n.AllUnits="N"})};n.parseIntIDs=function(){n.redeemportFolioName=parseInt(n.redeemportFolioName);n.redeemGoalName=parseInt(n.redeemGoalName);console.log(n.redeemportFolioName)};n.RedemptionCartList2=[];n.redemptionCartgoals=function(t){var i,r;if(t.redeemgoals==!0){if(n.redeemCalcName=="retirement"){for(i=0;t.GoalID!=n.myInvestedGoalList.RetirementCalculatorList[i].Id;i++);t.GoalorPortfolioName=n.myInvestedGoalList.RetirementCalculatorList[i].GoalName}else if(n.redeemCalcName=="education"){for(i=0;t.GoalID!=n.myInvestedGoalList.EducationCalculatorList[i].Id;i++);t.GoalorPortfolioName=n.myInvestedGoalList.EducationCalculatorList[i].GoalName}else if(n.redeemCalcName=="bigbuy"){for(i=0;t.GoalID!=n.myInvestedGoalList.BigBuyFundCalculatorList[i].Id;i++);t.GoalorPortfolioName=n.myInvestedGoalList.BigBuyFundCalculatorList[i].GoalName}else if(n.redeemCalcName=="getwealthy"){for(i=0;t.GoalID!=n.myInvestedGoalList.WealthyCalculatorList[i].Id;i++);t.GoalorPortfolioName=n.myInvestedGoalList.WealthyCalculatorList[i].GoalName}else if(n.redeemCalcName=="wedding"){for(i=0;t.GoalID!=n.myInvestedGoalList.WeddingCalculatorList[i].Id;i++);t.GoalorPortfolioName=n.myInvestedGoalList.WeddingCalculatorList[i].GoalName}else if(n.redeemCalcName=="emergency"){for(i=0;t.GoalID!=n.myInvestedGoalList.EmergencyFundCalculatorList[i].Id;i++);t.GoalorPortfolioName=n.myInvestedGoalList.EmergencyFundCalculatorList[i].GoalName}$.notify({icon:"pe-7s-cart",message:t.FundName+" was added to Redemption Cart"},{type:"info",timer:500});n.RedemptionCartList2.push(t)}else if(t.redeemgoals==!1){for(r=0;t.TrxnUniqueID!=n.RedemptionCartList2[r].TrxnUniqueID;r++);n.RedemptionCartList2.splice(r,1)}};n.redemptionCartportfolio=function(t){var i,r;if(t.redeemportfolio==!0){for(i=0;i<Object.keys(n.myPortfolioList).length;i++)if(n.redeemportFolioName==n.myPortfolioList[i].TrxnId)break;t.GoalorPortfolioName=n.myPortfolioList[i].Type;$.notify({icon:"pe-7s-cart",message:t.FundName+" was added to Redemption Cart"},{type:"info",timer:500});n.RedemptionCartList2.push(t)}else if(t.redeemportfolio==!1){for(r=0;t.TrxnUniqueID!=n.RedemptionCartList2[r].TrxnUniqueID;r++);n.RedemptionCartList2.splice(r,1)}};n.redemptionCartgoalspushAll=function(){for(var t,u,r,i=0;i<Object.keys(n.FundListforRedeemGoals).length;i++)if(n.FundListforRedeemGoals[i].CalculatorName==n.redeemCalcName&&n.FundListforRedeemGoals[i].GoalID==n.redeemGoalName)if(n.FundListforRedeemGoals[i].RedeemAmt!=null){if(console.log("Insode 1"),n.FundListforRedeemGoals[i].redeemgoals=!0,n.redeemCalcName=="retirement"){for(t=0;n.FundListforRedeemGoals[i].GoalID!=n.myInvestedGoalList.RetirementCalculatorList[t].Id;t++);n.FundListforRedeemGoals[i].GoalorPortfolioName=n.myInvestedGoalList.RetirementCalculatorList[t].GoalName}else if(n.redeemCalcName=="education"){for(t=0;n.FundListforRedeemGoals[i].GoalID!=n.myInvestedGoalList.EducationCalculatorList[t].Id;t++);n.FundListforRedeemGoals[i].GoalorPortfolioName=n.myInvestedGoalList.EducationCalculatorList[t].GoalName}else if(n.redeemCalcName=="bigbuy"){for(t=0;n.FundListforRedeemGoals[i].GoalID!=n.myInvestedGoalList.BigBuyFundCalculatorList[t].Id;t++);n.FundListforRedeemGoals[i].GoalorPortfolioName=n.myInvestedGoalList.BigBuyFundCalculatorList[t].GoalName}else if(n.redeemCalcName=="getwealthy"){for(t=0;n.FundListforRedeemGoals[i].GoalID!=n.myInvestedGoalList.WealthyCalculatorList[t].Id;t++);n.FundListforRedeemGoals[i].GoalorPortfolioName=n.myInvestedGoalList.WealthyCalculatorList[t].GoalName}else if(n.redeemCalcName=="wedding"){for(t=0;n.FundListforRedeemGoals[i].GoalID!=n.myInvestedGoalList.WeddingCalculatorList[t].Id;t++);n.FundListforRedeemGoals[i].GoalorPortfolioName=n.myInvestedGoalList.WeddingCalculatorList[t].GoalName}else if(n.redeemCalcName=="emergency"){for(t=0;n.FundListforRedeemGoals[i].GoalID!=n.myInvestedGoalList.EmergencyFundCalculatorList[t].Id;t++);n.FundListforRedeemGoals[i].GoalorPortfolioName=n.myInvestedGoalList.EmergencyFundCalculatorList[t].GoalName}for(u=!1,r=0;r<Object.keys(n.RedemptionCartList2).length;r++)if(n.FundListforRedeemGoals[i].TrxnUniqueID==n.RedemptionCartList2[r].TrxnUniqueID){u=!0;break}u==!1&&($.notify({icon:"pe-7s-cart",message:"Added all funds to Redemption Cart!!"},{type:"warning",timer:1e3}),n.RedemptionCartList2.push(n.FundListforRedeemGoals[i]))}else if(n.FundListforRedeemGoals[i].RedeemAmt==null){$.notify({icon:"pe-7s-attention",message:"Kindly fill all the details before redeeming all the funds!!"},{type:"danger",timer:1e3});break}};n.redemptionCartportfoliopushAll=function(){for(var i,u,r,t=0;t<Object.keys(n.FundListforRedeemPortfolio).length;t++)if(n.FundListforRedeemPortfolio[t].GoalID==n.redeemportFolioName)if(n.FundListforRedeemPortfolio[t].RedeemAmt!=null){for(n.FundListforRedeemPortfolio[t].redeemportfolio=!0,console.log("COutn",t),i=0;i<Object.keys(n.myPortfolioList).length;i++)if(n.redeemportFolioName==n.myPortfolioList[i].TrxnId)break;for(n.FundListforRedeemPortfolio[t].GoalorPortfolioName=n.myPortfolioList[i].Type,u=!1,r=0;r<Object.keys(n.RedemptionCartList2).length;r++)if(n.FundListforRedeemPortfolio[t].TrxnUniqueID==n.RedemptionCartList2[r].TrxnUniqueID){u=!0;break}u==!1&&($.notify({icon:"pe-7s-cart",message:"Added all funds to Redemption Cart!!"},{type:"warning",timer:1e3}),n.RedemptionCartList2.push(n.FundListforRedeemPortfolio[t]))}else if(n.FundListforRedeemPortfolio[t].RedeemAmt==null&&n.FundListforRedeemPortfolio[t].redeemable==!0){$.notify({icon:"pe-7s-attention",message:"Kindly fill all the details before redeeming all the funds!!"},{type:"danger",timer:1e3});break}};n.deleteFund=function(t){for(var r,u,i=0;t.TrxnUniqueID!=n.RedemptionCartList2[i].TrxnUniqueID;i++);if(t.Type=="goal"){for(r=0;t.TrxnUniqueID!=n.FundListforRedeemGoals[r].TrxnUniqueID;r++);n.FundListforRedeemGoals[r].redeemgoals=!1}else if(t.Type=="myportfolio"){for(u=0;t.TrxnUniqueID!=n.FundListforRedeemPortfolio[u].TrxnUniqueID;u++);n.FundListforRedeemPortfolio[u].redeemportfolio=!1}$.notify({icon:"pe-7s-back-2",message:"Removed "+n.RedemptionCartList2[i].FundName+" from Cart!!"},{type:"success",timer:1e3});n.RedemptionCartList2.splice(i,1)};n.Floorandwrap=function(n){var t=Math.floor(n*100)/100;return t>1?t:0};n.ConfirmRedeem=function(){var r,t,u,f;return console.clear(),console.log(n.RedemptionCartList2),r=Object.keys(n.RedemptionCartList2),t=r.length,console.log("count:"+t),u=JSON.stringify(n.RedemptionCartList2),f={funds:u,count:t},i({method:"POST",url:"/api/values/Redemption",params:f}).success(function(n){n?window.location="/en/user/redeemsuccess?trxnid="+n:(alert("Oops!!! Something went wrong. Your funds couldn't not be redeemed. Please contact the admin for further details. Thank You!!!!"),window.location="/en/user")}).error(function(){})};n.TotalRedeemAmt=function(){for(var t=0;t<Object.keys(n.RedemptionCartList2).length;t++)n.totredemptionAmt=n.totredemptionAmt+n.RedemptionCartList2[t].RedeemAmt;return n.totredemptionAmt};n.notificationcount=function(){if(Object.keys(n.notifications).length>0)return $(".dash-notification").css("display","block"),Object.keys(n.notifications).length/4;$(".dash-notification").css("display","none")};n.$watch("FileUpload",function(n){n===!1&&setTimeout(function(){var f=document.getElementById("panUpload"),n,t,i,r;f.addEventListener("change",u,!1);n=document.getElementById("addressProofUpload");n.addEventListener("change",u,!1);t=document.getElementById("cancelledchequeUpload");t.addEventListener("change",u,!1);i=document.getElementById("scannedsignatureUpload");i.addEventListener("change",u,!1);r=document.getElementById("addrFrontUpload");r.addEventListener("change",u,!1)},1e3)});n.selectFileforUpload=function(t,i){n.SelectedFileForUpload=t[0];n.SaveFile(i)};n.SaveFile=function(t){FileUploadService.UploadFile(n.SelectedFileForUpload,t)}}angular.module("finmitraApp").controller("RedeemController",n);n.$inject=["$scope","$location","$http","CommonService"]}(),function(){"use strict";angular.module("finmitraApp").directive("drawChart",function(){return{restrict:"E",replace:!0,template:"<div><\/div>",scope:{configData:"="},link:function(n,t){for(var f,i=n.configData!=undefined?n.configData.length:0,u=[],r,o,s,e=2015;e<=2015+i;e++)u.push(e+1);r={chart:{renderTo:t[0],plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!0,type:"area"},xAxis:{title:{text:"Years"},min:0,max:i,categories:u},title:{text:""},yAxis:{title:{text:"Amount in Rs."},min:0,max:n.configData!=undefined?n.configData[i]:0},tooltip:{shared:!0,formatter:function(){return"In <b>"+this.x+"<\/b>,<br>Your investment is valued at <b> Rs."+s(this.y)+"<\/b> <\/b>"}},credits:{enabled:!1},plotOptions:{area:{stacking:"normal",lineColor:"#ffffff",lineWidth:1,marker:{lineWidth:1,lineColor:"#ffffff"}},series:{events:{legendItemClick:function(){return!1}}}},series:[{showInLegend:!1,name:"Gain",type:"area",color:"#27ae60",data:n.configData}]};o=function(){var n={chart:{renderTo:t[0]}},i=angular.extend(n,r);f=new Highcharts.Chart(i)};n.$watch("configData.series",function(){o()});n.$watch("configData.loading",function(n){f&&(n?f.showLoading():f.hideLoading())});n.$watch("configData",function(t){if(t){r.series[0].data=n.configData;i=n.configData.length;r.xAxis.max=i;r.xAxis.tickInterval=i-Math.round(i/1.2);u=[];for(var f=2015;f<=2015+i;f++)u.push(f+1);r.xAxis.categories=u;o()}},!0);o();s=function(n){if(n){n=n.toString();var t=n.substring(n.length-3),i=n.substring(0,n.length-3);return i!=""&&(t=","+t),i.replace(/\B(?=(\d{2})+(?!\d))/g,",")+t}return 0}}}})}(),function(){"use strict";angular.module("finmitraApp").directive("drawGaugeChart",function(){return{restrict:"E",scope:{gaugeData:"="},link:function(n,t){n.$watch("gaugeData",function(n){n&&i()},!0);var i=function(){var i={chart:{type:"solidgauge"},title:null,pane:{center:["50%","85%"],size:"140%",startAngle:-90,endAngle:90,background:{backgroundColor:Highcharts.theme&&Highcharts.theme.background2||"#EEE",innerRadius:"60%",outerRadius:"100%",shape:"arc"}},tooltip:{enabled:!1},yAxis:{linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,parseInt(n.gaugeData.Max)==7?"#55BF3B":"#DF5353"],[1,parseInt(n.gaugeData.Max)==7?"#DF5353":"#55BF3B"]],lineWidth:0,minorTickInterval:null,tickPixelInterval:400,tickWidth:0,title:{y:-70},labels:{y:16}},plotOptions:{solidgauge:{dataLabels:{y:5,borderWidth:0,useHTML:!0}}}};$(t[0]).highcharts(Highcharts.merge(i,{yAxis:{min:n.gaugeData.Min===undefined?0:n.gaugeData.Min,max:n.gaugeData.Max===undefined?100:n.gaugeData.Max,title:{text:n.gaugeData.Name===undefined?"":n.gaugeData.Name}},series:[{name:n.gaugeData.Name===undefined?"":n.gaugeData.Name,data:n.gaugeData.Value===undefined?0:[parseInt(n.gaugeData.Value)],dataLabels:{format:'<div style="text-align:center"><span style="font-size:25px;color:'+(Highcharts.theme&&Highcharts.theme.contrastTextColor||"black")+'">{y}<\/span><br/><span style="font-size:12px;color:silver"><\/span><\/div>'},tooltip:{valueSuffix:"% of Goal"}}]}))}}}})}(),function(){"use strict";angular.module("finmitraApp").directive("drawPieChart",function(){return{restrict:"E",scope:{chartData:"="},link:function(n,t){n.$watch("chartData",function(n){n&&i()},!0);var i=function(){for(var c=n.chartData.length!=0?[n.chartData[0][0],n.chartData[0][1],n.chartData[0][2],n.chartData[0][3]]:[],l=n.chartData.length!=0?[n.chartData[1][0],n.chartData[1][1],n.chartData[1][2],n.chartData[1][3],n.chartData[1][4],n.chartData[1][5],n.chartData[1][6]]:[],a=n.chartData.length!=0?n.chartData[0].reduce(function(n,t){return n+t},0):0,v=n.chartData.length!=0?n.chartData[1].reduce(function(n,t){return n+t},0):0,f=Highcharts.getOptions().colors,y=["Equity","Debt"],r=[{y:a,color:f[0],drilldown:{categories:["Large Cap","Mid Cap","Multi Cap","Small Cap"],data:c,color:f[0]}},{y:v,color:f[2],drilldown:{categories:["Income Fund","Liquid Cap","Ultra Short Term Debt Fund","RD","Short Term Debt Fund","Credits Opportunities Fund","Dynamic Fund"],data:l,color:f[2]}}],o=[],s=[],u,p=r.length,e,h,w,i=0;i<p;i+=1)for(o.push({name:y[i],y:r[i].y,color:r[i].color}),e=r[i].drilldown.data.length,u=0;u<e;u+=1)h=.2-u/e/5,s.push({name:r[i].drilldown.categories[u],y:r[i].drilldown.data[u],color:Highcharts.Color(r[i].color).brighten(h).get()});w=new Highcharts.Chart({chart:{renderTo:t[0],margin:[0,0,0,0],spacingTop:0,spacingBottom:0,spacingLeft:0,spacingRight:0,type:"pie"},title:{text:null},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:,.2f}%<\/b>",percentageDecimals:1},plotOptions:{pie:{shadow:!1,center:["60%","40%"]}},series:[{name:"Contribution",data:o,size:"60%",dataLabels:{formatter:function(){return this.y>5?this.point.name:null},color:"#000000",distance:-30}},{name:"Contribution",data:s,size:"80%",innerSize:"60%",dataLabels:{formatter:function(){return this.y>1?"<b>"+this.point.name+":<\/b> "+this.y+"%":null},color:"#007d94",distance:-30}}]})}}}})}(),function(){"use strict";function n(n){return{require:"?ngModel",link:function(t,i,r,u){u&&(u.$formatters.unshift(function(){return n("number")(u.$modelValue)}),u.$parsers.unshift(function(t){var r=t.replace(/[\,\.]/g,""),u=n("number")(r);return i.val(u),r}))}}}angular.module("finmitraApp").directive("format",n);n.$inject=["$filter"]}(),function(){"use strict";function n(){return{require:"ngModel",link:function(n,t,i,r){function u(n){if(n){var t=n.replace(/[^0-9]/g,"");return t!==n&&(r.$setViewValue(t),r.$render()),t}return undefined}r.$parsers.push(u)}}}angular.module("finmitraApp").directive("numbersOnly",n);n.$inject=[]}(),function(){"use strict";function n(){return{link:function(n,t,i){function f(n){var t=n.getDate();return $.inArray(t,r)!=-1?[!0,"","Available"]:[!1,"","unAvailable"]}var r=i.sipdates.split(",").map(Number),u=i.sipbegindate.split("-").map(Number);$(t).datepicker({beforeShowDay:f,dateFormat:"dd-M-yy",minDate:u[0]+60})}}}angular.module("finmitraApp").directive("sipenddate",n)}(),function(){"use strict";function n(n,t){return{link:function(i,r){t.spinnerActive=!1;i.isLoading=function(){return n.pendingRequests.length>0};i.$watch(i.isLoading,function(n){t.spinnerActive=n;n?r.removeClass("ng-hide"):r.addClass("ng-hide")})}}}angular.module("finmitraApp").directive("usSpinner",n);n.$inject=["$http","$rootScope"]}(),function(){"use strict";function n(n,t,i){return{link:function(n,t,r){$(t).datepicker({beforeShowDay:function(n){var t=r.sipdates.split(",").map(Number),i=n.getDate();return $.inArray(i,t)!=-1},format:"dd-M-yyyy",autoclose:!0,showMonthAfterYear:!0,showButtonPanel:!0,startDate:r.start+"d",endDate:r.end+"d"}).on("changeDate",function(){i(function(){},10)})}}}angular.module("finmitraApp").directive("datepicker",n);n.$inject=["$compile","$parse","$timeout"]}()